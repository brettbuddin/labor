module Labor
  module Helpers
    def classify(word)
      word.split('-').each { |part| part[0] = part[0].chr.upcase }.join
    end

    def constantize(camel_cased_word)
      camel_cased_word = camel_cased_word.to_s

      if camel_cased_word.include?('-')
        camel_cased_word = classify(camel_cased_word)
      end

      names = camel_cased_word.split('::')
      names.shift if names.empty? || names.first.empty?

      constant = Object
      names.each do |name|
        constant = constant.const_get(name) || constant.const_missing(name)
      end
      constant
    end

    def log(str)
      if Labor.verbose
        puts "#{Time.now.strftime('%I:%M:%S %d-%m-%Y')}: #{str}"
      end
    end
  end
end
